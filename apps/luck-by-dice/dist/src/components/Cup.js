"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Cup = void 0;
/**
 * A cup is a array containing collections
 */
class Cup extends Array {
    allocateBonuses(amount) {
        this.forEach((collection) => {
            amount = collection.allocateBonuses(amount);
        });
        return amount;
    }
    roll() {
        let value = 0;
        this.forEach((collection) => {
            // roll each collection
            collection.roll();
            if (collection.value !== undefined) {
                // get value without modifier and multiplier
                value += collection.value;
            }
        });
        return value;
    }
    get outcomePercent() {
        const values = [];
        this.forEach((collection) => {
            values.push(collection.outcomePercent);
        });
        return this._getAverage(values);
    }
    _getAverage(array) {
        let total = 0;
        for (let i = 0; i < array.length; i++) {
            total += array[i];
        }
        return total / array.length;
    }
}
exports.Cup = Cup;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ3VwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvQ3VwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQVFBOztHQUVHO0FBQ0gsTUFBYSxHQUFJLFNBQVEsS0FBSztJQUNuQixlQUFlLENBQUMsTUFBYztRQUNqQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsVUFBdUIsRUFBRSxFQUFFO1lBQ3JDLE1BQU0sR0FBRyxVQUFVLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2hELENBQUMsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQztJQUVNLElBQUk7UUFDUCxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDZCxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsVUFBdUIsRUFBRSxFQUFFO1lBQ3JDLHVCQUF1QjtZQUN2QixVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7WUFFbEIsSUFBRyxVQUFVLENBQUMsS0FBSyxLQUFLLFNBQVMsRUFBQztnQkFDOUIsNENBQTRDO2dCQUM3QyxLQUFLLElBQUksVUFBVSxDQUFDLEtBQUssQ0FBQzthQUM1QjtRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsT0FBTyxLQUFLLENBQUM7SUFDakIsQ0FBQztJQUVELElBQVcsY0FBYztRQUNyQixNQUFNLE1BQU0sR0FBa0IsRUFBRSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxVQUF1QixFQUFFLEVBQUU7WUFDckMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDM0MsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVPLFdBQVcsQ0FBQyxLQUFvQjtRQUNwQyxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDZCxLQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNsQyxLQUFLLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3JCO1FBQ0QsT0FBTyxLQUFLLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQztJQUNoQyxDQUFDO0NBQ0o7QUF0Q0Qsa0JBc0NDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSUNvbGxlY3Rpb24gfSBmcm9tICcuL0NvbGxlY3Rpb24nO1xuXG5leHBvcnQgaW50ZXJmYWNlIElDdXAgZXh0ZW5kcyBBcnJheTxJQ29sbGVjdGlvbj4ge1xuICAgIHJvbGwoKTogbnVtYmVyO1xuICAgIGFsbG9jYXRlQm9udXNlcyhhbW91bnQ6IG51bWJlcik6IG51bWJlcjtcbiAgICBnZXQgb3V0Y29tZVBlcmNlbnQoKTogbnVtYmVyO1xufVxuXG4vKipcbiAqIEEgY3VwIGlzIGEgYXJyYXkgY29udGFpbmluZyBjb2xsZWN0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ3VwIGV4dGVuZHMgQXJyYXkgaW1wbGVtZW50cyBJQ3VwIHtcbiAgICBwdWJsaWMgYWxsb2NhdGVCb251c2VzKGFtb3VudDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgdGhpcy5mb3JFYWNoKChjb2xsZWN0aW9uOiBJQ29sbGVjdGlvbikgPT4ge1xuICAgICAgICAgICAgYW1vdW50ID0gY29sbGVjdGlvbi5hbGxvY2F0ZUJvbnVzZXMoYW1vdW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhbW91bnQ7XG4gICAgfVxuXG4gICAgcHVibGljIHJvbGwoKTogbnVtYmVye1xuICAgICAgICBsZXQgdmFsdWUgPSAwO1xuICAgICAgICB0aGlzLmZvckVhY2goKGNvbGxlY3Rpb246IElDb2xsZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAvLyByb2xsIGVhY2ggY29sbGVjdGlvblxuICAgICAgICAgICAgY29sbGVjdGlvbi5yb2xsKCk7XG5cbiAgICAgICAgICAgIGlmKGNvbGxlY3Rpb24udmFsdWUgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgLy8gZ2V0IHZhbHVlIHdpdGhvdXQgbW9kaWZpZXIgYW5kIG11bHRpcGxpZXJcbiAgICAgICAgICAgICAgIHZhbHVlICs9IGNvbGxlY3Rpb24udmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IG91dGNvbWVQZXJjZW50KCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHZhbHVlczogQXJyYXk8bnVtYmVyPiA9IFtdO1xuICAgICAgICB0aGlzLmZvckVhY2goKGNvbGxlY3Rpb246IElDb2xsZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICB2YWx1ZXMucHVzaChjb2xsZWN0aW9uLm91dGNvbWVQZXJjZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRBdmVyYWdlKHZhbHVlcyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0QXZlcmFnZShhcnJheTogQXJyYXk8bnVtYmVyPik6IG51bWJlciB7XG4gICAgICAgIGxldCB0b3RhbCA9IDA7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdG90YWwgKz0gYXJyYXlbaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvdGFsIC8gYXJyYXkubGVuZ3RoO1xuICAgIH1cbn1cbiJdfQ==