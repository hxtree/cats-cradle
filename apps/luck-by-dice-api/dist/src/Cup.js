"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Cup = void 0;
/**
 * A cup is a array containing collections
 */
class Cup extends Array {
    allocateBonuses(amount) {
        this.forEach((collection) => {
            amount = collection.allocateBonuses(amount);
        });
        return amount;
    }
    roll() {
        let value = 0;
        this.forEach((collection) => {
            // roll each collection
            collection.roll();
            if (collection.value !== undefined) {
                // get value without modifier and multiplier
                value += collection.value;
            }
        });
        return value;
    }
    get outcomePercent() {
        const values = [];
        this.forEach((collection) => {
            values.push(collection.outcomePercent);
        });
        return this._getAverage(values);
    }
    _getAverage(array) {
        let total = 0;
        for (let i = 0; i < array.length; i++) {
            total += array[i];
        }
        return total / array.length;
    }
}
exports.Cup = Cup;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ3VwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL0N1cC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFRQTs7R0FFRztBQUNILE1BQWEsR0FBSSxTQUFRLEtBQUs7SUFDbkIsZUFBZSxDQUFDLE1BQWM7UUFDakMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQXVCLEVBQUUsRUFBRTtZQUNyQyxNQUFNLEdBQUcsVUFBVSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNoRCxDQUFDLENBQUMsQ0FBQztRQUNILE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7SUFFTSxJQUFJO1FBQ1AsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQXVCLEVBQUUsRUFBRTtZQUNyQyx1QkFBdUI7WUFDdkIsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDO1lBRWxCLElBQUcsVUFBVSxDQUFDLEtBQUssS0FBSyxTQUFTLEVBQUM7Z0JBQzlCLDRDQUE0QztnQkFDN0MsS0FBSyxJQUFJLFVBQVUsQ0FBQyxLQUFLLENBQUM7YUFDNUI7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILE9BQU8sS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUFFRCxJQUFXLGNBQWM7UUFDckIsTUFBTSxNQUFNLEdBQWtCLEVBQUUsQ0FBQztRQUNqQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsVUFBdUIsRUFBRSxFQUFFO1lBQ3JDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQzNDLENBQUMsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFFTyxXQUFXLENBQUMsS0FBb0I7UUFDcEMsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDbEMsS0FBSyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNyQjtRQUNELE9BQU8sS0FBSyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUM7SUFDaEMsQ0FBQztDQUNKO0FBdENELGtCQXNDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElDb2xsZWN0aW9uIH0gZnJvbSAnLi9Db2xsZWN0aW9uJztcblxuZXhwb3J0IGludGVyZmFjZSBJQ3VwIGV4dGVuZHMgQXJyYXk8SUNvbGxlY3Rpb24+IHtcbiAgICByb2xsKCk6IG51bWJlcjtcbiAgICBhbGxvY2F0ZUJvbnVzZXMoYW1vdW50OiBudW1iZXIpOiBudW1iZXI7XG4gICAgZ2V0IG91dGNvbWVQZXJjZW50KCk6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBBIGN1cCBpcyBhIGFycmF5IGNvbnRhaW5pbmcgY29sbGVjdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIEN1cCBleHRlbmRzIEFycmF5IGltcGxlbWVudHMgSUN1cCB7XG4gICAgcHVibGljIGFsbG9jYXRlQm9udXNlcyhhbW91bnQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHRoaXMuZm9yRWFjaCgoY29sbGVjdGlvbjogSUNvbGxlY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGFtb3VudCA9IGNvbGxlY3Rpb24uYWxsb2NhdGVCb251c2VzKGFtb3VudCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYW1vdW50O1xuICAgIH1cblxuICAgIHB1YmxpYyByb2xsKCk6IG51bWJlcntcbiAgICAgICAgbGV0IHZhbHVlID0gMDtcbiAgICAgICAgdGhpcy5mb3JFYWNoKChjb2xsZWN0aW9uOiBJQ29sbGVjdGlvbikgPT4ge1xuICAgICAgICAgICAgLy8gcm9sbCBlYWNoIGNvbGxlY3Rpb25cbiAgICAgICAgICAgIGNvbGxlY3Rpb24ucm9sbCgpO1xuXG4gICAgICAgICAgICBpZihjb2xsZWN0aW9uLnZhbHVlICE9PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIC8vIGdldCB2YWx1ZSB3aXRob3V0IG1vZGlmaWVyIGFuZCBtdWx0aXBsaWVyXG4gICAgICAgICAgICAgICB2YWx1ZSArPSBjb2xsZWN0aW9uLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBvdXRjb21lUGVyY2VudCgpOiBudW1iZXIge1xuICAgICAgICBjb25zdCB2YWx1ZXM6IEFycmF5PG51bWJlcj4gPSBbXTtcbiAgICAgICAgdGhpcy5mb3JFYWNoKChjb2xsZWN0aW9uOiBJQ29sbGVjdGlvbikgPT4ge1xuICAgICAgICAgICAgdmFsdWVzLnB1c2goY29sbGVjdGlvbi5vdXRjb21lUGVyY2VudCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0QXZlcmFnZSh2YWx1ZXMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldEF2ZXJhZ2UoYXJyYXk6IEFycmF5PG51bWJlcj4pOiBudW1iZXIge1xuICAgICAgICBsZXQgdG90YWwgPSAwO1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRvdGFsICs9IGFycmF5W2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b3RhbCAvIGFycmF5Lmxlbmd0aDtcbiAgICB9XG59XG4iXX0=