"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Cup = void 0;
/**
 * A cup is a array containing collections
 */
class Cup extends Array {
    allocateBonuses(amount) {
        this.forEach((collection) => {
            amount = collection.allocateBonuses(amount);
        });
        return amount;
    }
    roll() {
        let value = 0;
        this.forEach((collection) => {
            // roll each collection
            collection.roll();
            if (collection.value !== undefined) {
                // get value without modifier and multiplier
                value += collection.value;
            }
        });
        return value;
    }
    get outcomePercent() {
        const values = [];
        this.forEach((collection) => {
            values.push(collection.outcomePercent);
        });
        return this._getAverage(values);
    }
    _getAverage(array) {
        let total = 0;
        for (let i = 0; i < array.length; i++) {
            total += array[i];
        }
        return total / array.length;
    }
}
exports.Cup = Cup;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ3VwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL0N1cC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFRQTs7R0FFRztBQUNILE1BQWEsR0FBSSxTQUFRLEtBQUs7SUFDckIsZUFBZSxDQUFDLE1BQWM7UUFDbkMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQXVCLEVBQUUsRUFBRTtZQUN2QyxNQUFNLEdBQUcsVUFBVSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM5QyxDQUFDLENBQUMsQ0FBQztRQUNILE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFFTSxJQUFJO1FBQ1QsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFVBQXVCLEVBQUUsRUFBRTtZQUN2Qyx1QkFBdUI7WUFDdkIsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDO1lBRWxCLElBQUksVUFBVSxDQUFDLEtBQUssS0FBSyxTQUFTLEVBQUU7Z0JBQ2xDLDRDQUE0QztnQkFDNUMsS0FBSyxJQUFJLFVBQVUsQ0FBQyxLQUFLLENBQUM7YUFDM0I7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztJQUVELElBQVcsY0FBYztRQUN2QixNQUFNLE1BQU0sR0FBa0IsRUFBRSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxVQUF1QixFQUFFLEVBQUU7WUFDdkMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDekMsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbEMsQ0FBQztJQUVPLFdBQVcsQ0FBQyxLQUFvQjtRQUN0QyxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDZCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNyQyxLQUFLLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ25CO1FBQ0QsT0FBTyxLQUFLLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQztJQUM5QixDQUFDO0NBQ0Y7QUF0Q0Qsa0JBc0NDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtJQ29sbGVjdGlvbn0gZnJvbSAnLi9Db2xsZWN0aW9uJztcblxuZXhwb3J0IGludGVyZmFjZSBJQ3VwIGV4dGVuZHMgQXJyYXk8SUNvbGxlY3Rpb24+IHtcbiAgcm9sbCgpOiBudW1iZXI7XG4gIGFsbG9jYXRlQm9udXNlcyhhbW91bnQ6IG51bWJlcik6IG51bWJlcjtcbiAgZ2V0IG91dGNvbWVQZXJjZW50KCk6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBBIGN1cCBpcyBhIGFycmF5IGNvbnRhaW5pbmcgY29sbGVjdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIEN1cCBleHRlbmRzIEFycmF5IGltcGxlbWVudHMgSUN1cCB7XG4gIHB1YmxpYyBhbGxvY2F0ZUJvbnVzZXMoYW1vdW50OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHRoaXMuZm9yRWFjaCgoY29sbGVjdGlvbjogSUNvbGxlY3Rpb24pID0+IHtcbiAgICAgIGFtb3VudCA9IGNvbGxlY3Rpb24uYWxsb2NhdGVCb251c2VzKGFtb3VudCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFtb3VudDtcbiAgfVxuXG4gIHB1YmxpYyByb2xsKCk6IG51bWJlciB7XG4gICAgbGV0IHZhbHVlID0gMDtcbiAgICB0aGlzLmZvckVhY2goKGNvbGxlY3Rpb246IElDb2xsZWN0aW9uKSA9PiB7XG4gICAgICAvLyByb2xsIGVhY2ggY29sbGVjdGlvblxuICAgICAgY29sbGVjdGlvbi5yb2xsKCk7XG5cbiAgICAgIGlmIChjb2xsZWN0aW9uLnZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gZ2V0IHZhbHVlIHdpdGhvdXQgbW9kaWZpZXIgYW5kIG11bHRpcGxpZXJcbiAgICAgICAgdmFsdWUgKz0gY29sbGVjdGlvbi52YWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgb3V0Y29tZVBlcmNlbnQoKTogbnVtYmVyIHtcbiAgICBjb25zdCB2YWx1ZXM6IEFycmF5PG51bWJlcj4gPSBbXTtcbiAgICB0aGlzLmZvckVhY2goKGNvbGxlY3Rpb246IElDb2xsZWN0aW9uKSA9PiB7XG4gICAgICB2YWx1ZXMucHVzaChjb2xsZWN0aW9uLm91dGNvbWVQZXJjZW50KTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fZ2V0QXZlcmFnZSh2YWx1ZXMpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZ2V0QXZlcmFnZShhcnJheTogQXJyYXk8bnVtYmVyPik6IG51bWJlciB7XG4gICAgbGV0IHRvdGFsID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB0b3RhbCArPSBhcnJheVtpXTtcbiAgICB9XG4gICAgcmV0dXJuIHRvdGFsIC8gYXJyYXkubGVuZ3RoO1xuICB9XG59XG4iXX0=